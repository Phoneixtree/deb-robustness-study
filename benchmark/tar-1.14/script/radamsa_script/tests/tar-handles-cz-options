# FEATURE: CONFIG_FEATURE_TAR_CREATE
# FEATURE: CONFIG_FEATURE_SEAMLESS_GZ
cnt=0
while(( $cnt<=499 )) 
do
echo "foo foo bar"| radamsa --seed ${cnt} > foo.orig
cp foo.orig foo
./tar czf foo.tar.gz foo
echo $? >> result/log_reduced_czf
rm foo
./tar xzf foo.tar.gz
echo $? >> result/log_reduced_xzf
diff -q foo.orig foo >> result/log_behavior
let "cnt++"
done

reduced_hang=`grep -o '124' result/log_reduced_czf | wc -l`
reduced_exc=`grep -Eo '134|139' result/log_reduced_czf | wc -l`
reduced_beh=`grep -o '0' result/log_behavior | wc -l`
echo -e "tar-handles-cz-options count = 500 \n" >> result/result
echo -e "reduced_bin -czf hang "${reduced_hang}" times (total 500)\n" >> result/result
echo -e "reduced_bin -czf has "${reduced_exc}" exceptions (total 500)\n" >> result/result
echo -e "reduced_bin successfully executed "${reduced_beh}" times (total 500)\n" >> result/result
rm result/log_reduced_czf

reduced_hang=`grep -o '124' result/log_reduced_xzf | wc -l`
reduced_exc=`grep -Eo '134|139' result/log_reduced_xzf | wc -l`
echo -e "reduced_bin -xzf hang "${reduced_hang}" times (total 500)\n" >> result/result
echo -e "reduced_bin -xzf has "${reduced_exc}" exceptions (total 500)\n" >> result/result
rm result/log_reduced_xzf
rm result/log_behavior